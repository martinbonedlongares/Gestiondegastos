<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns:th="https://www.thymeleaf.org">
    <head>
        <title>Nuevo movimiento</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="estilos.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $(document).ready(function (){
                var campo=document.querySelector('#fecha');
                var fecha=new Date();
                fecha.setHours(fecha.getHours()+2);
                campo.value=fecha.getFullYear().toString()+'-'+(fecha.getMonth()+1).toString().padStart(2,0)+'-'+fecha.getDate().toString().padStart(2,0)+" "+(fecha.getHours())+":"+fecha.getMinutes()+":"+fecha.getSeconds();
            });
            
        </script>
    </head>
    <body>
        <div>
            
            <form method="post" action="guardarMovimiento" th:object="${movimiento}">
                <div>
                    <input type="hidden" name="idUsuarioGrupo" th:value="${param.idUsuarioGrupo[0]}"/>
                    <input type="" th:field="*{id}"/>
                </div>                
                <div>
                    <label for="concepto">Concepto</label>
                    <select id="concepto" name="concepto" th:field="*{concepto}">
                        <option value="entretenimiento">Entretenimiento</option>
                        <option value="alimentacion">Alimentaci贸n</option>
                        <option value="ropa">Ropa</option>
                        <option value="hogar">Hogar</option>
                        <option value="higiene">Higiene</option>
                        <option value="transporte">Transporte</option>
                        <option value="comunicacion">Comunicaci贸n</option>
                        <option value="medicina">Medicina</option>
                        <option value="regalo">Regalo</option>
                        <option value="mascotas">Mascota</option>
                    </select>
                </div>
                <div>
                    <input type="hidden" id="fecha" th:field="*{fecha}"/>
                </div>
                <div>
                    <label for="cantidad">Cantidad</label>
                    <input id="cantidad" placeholder="Introduce la cantidad" type="number" step="any" th:field="*{cantidad}" onKeyUp="document.getElementById('tipoMovimiento').style.display = 'block';"/>
                    <button id="tipoMovimiento" style="display:none"> Gasto</button>
                </div>
                <div>
                    <label for="info">Informaci贸n adicional</label>
                    <br>
                    <textarea id="info" placeholder="Introduce informaci贸n adicional del movimiento" rows="4" cols="50" th:field="*{info}"></textarea>
                </div>
                <div>
                    <button id="primero" style="visibility:visible;">Guardar</button>
                    <input id="save" type="submit" value="Aceptar" style="visibility:hidden;"/>
                    <button id="cancelar" onclick="mostrar()" style="visibility:hidden;">Cancelar</button>
                </div>
            </form>
        </div>
        <script>
            
             $('#gasto').click(function(e){
                    e.preventDefault();
                    $('#cantidad').val()*-1;
                    $('#gasto').text("Ingreso");
                });
            $('#primero').click(function(e){
                e.preventDefault();
                $('#primero').style.visibility='hidden';
            });
            /*function ocultar(){
                var x=document.getElementById("primero");
                var y=document.getElementById("save");
                var z=document.getElementById("cancelar");
                x.style.visibility='hidden';
                y.style.visibility='visible';
                z.style.visibility='visible';
            }
            function mostrar(){
                var x=document.getElementById("primero");
                var y=document.getElementById("save");
                var z=document.getElementById("cancelar");
                x.style.visibility='visible';
                y.style.visibility='hidden';
                z.style.visibility='hidden';
            }*/
            $('#tipoMovimiento').click(function(e){
                e.preventDefault();

                var c = $('#cantidad').val();
                $('#cantidad').val(c*-1);  

                if($('#tipoMovimiento').text() === "Ingreso"){

                    $('#tipoMovimiento').text("Gasto");
                }else{
                     $('#tipoMovimiento').text("Ingreso");
                }

            });
        </script>
    </body>
</html>
